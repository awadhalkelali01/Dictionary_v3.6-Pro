<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>๐ ูุงููุณ ุงูุทุงูุจ</title>
<link rel="stylesheet" href="styles.css">
<script src="modals.js" defer></script>
<style>
/* ุชุนุฏููุงุช ูุญููุฉ ุจุณูุทุฉ ูุธููุฑ ุงูุนููุงู ูุงููุฑุนู */
.index-title { font-size: 2rem; color: var(--primary); font-weight: 800; margin-bottom: 6px; }
.index-subtitle { color: #444; font-size: 1.05rem; margin-bottom: 8px; font-weight:700; }
.index-welcome { font-size: 1.15rem; color: var(--primary); margin-top: 6px; }
.header-icon { width:120px; display:block; margin:18px auto 8px; }
.actions { display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:18px; }
</style>
</head>
<body>

<header class="app-header">
  <div></div>
  <div style="text-align:center">
    <h1 style="margin:0">๐ ูุงููุณ ุงูุทุงูุจ</h1>
  </div>
  <div>
    <button id="btnSettings" class="icon-btn" title="ุงูุฅุนุฏุงุฏุงุช">โ๏ธ</button>
  </div>
</header>

<main class="container" style="text-align:center; padding-top: 10px;">

  <img src="icons/app-icon.png" alt="app" class="header-icon">

  <div class="index-title">๐ ูุงููุณ ุงูุทุงูุจ</div>

  <!-- ููุง ูุธูุฑ ุงูุตู ูุงูุทุงูุจ ูุฑุฉ ูุงุญุฏุฉ ููุท -->
  <div id="indexSubtitle" class="index-subtitle"></div>

  <!-- ุชุญูุฉ ุจุงุณู ุงูุฃูู ููุท -->
  <div id="welcomeLine" class="index-welcome"></div>

  <div class="actions">
    <button class="btn btn-main" onclick="location.href='students.html'">๐จโ๐ซ ุฅุฏุงุฑุฉ ุงูุตููู ูุงูุทูุงุจ</button>
    <button class="btn btn-main" onclick="location.href='dictionary.html'">๐ ูุชุญ ูุงููุณ ุงูุทุงูุจ</button>
    <button class="btn btn-main" onclick="location.href='quiz.html'">๐ฏ ุงุฎุชุจุงุฑ ุงููููุงุช</button>
    <button class="btn btn-secondary" onclick="location.href='help.html'">โ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู</button>
    <button class="btn btn-secondary" onclick="location.href='about.html'">โน๏ธ ุนู ุงูุชุทุจูู</button>
  </div>

</main>

<footer class="app-footer">
  โค๏ธโค๏ธ ุชุตููู ูุชูููุฐ: <b>ุฃุจู ุนุจุฏุงููู</b> โ ูุฏูุฉ ูู ุฃุจ ูุฃุจูุงุฆู โค๏ธโค๏ธ
</footer>

<!-- Shared modal/backdrop placeholders (required by modals.js) -->
<div id="sharedModalBackdrop" style="display:none;align-items:center;justify-content:center;">
  <div id="sharedModal"></div>
</div>
<div id="toast" aria-hidden="true"></div>

<script>
/* ======= ุชูุนูู ุงูุซูู ุนูุฏ ุชุญููู ุงูุตูุญุฉ (ูุง ุชุนุฏูู ุฅุถุงูู ูุทููุจ) ======= */
document.body.classList.add(localStorage.getItem("theme") || "theme-blue");

/* ======= ุชุญููู ุจูุงูุงุช ุงูุตู ูุงูุทุงูุจ ======= */
const cls = localStorage.getItem("className") || "";
const student = localStorage.getItem("studentName") || "";
const firstName = (student || "").split(" ")[0] || "";

document.getElementById("indexSubtitle").textContent =
  cls && student ? `ุงูุตู: ${cls} โ ุงูุทุงูุจ: ${student}` : "";

document.getElementById("welcomeLine").textContent =
  firstName ? `ูุฑุญุจูุง ุจู ูุง ${firstName}!` : "";

/* ======= ุฒุฑ ุงูุฅุนุฏุงุฏุงุช: ุดุฌุฑุฉ ุฅุนุฏุงุฏุงุช ุชุดูู ุงุฎุชูุงุฑ ุงูุซูู (ุฃุฒุฑู/ุฃุฎุถุฑ/ุจููุณุฌู/ุฑูุงุฏู) ======= */
document.getElementById("btnSettings").onclick = function () {
  const s = JSON.parse(localStorage.getItem("appSettings") || "{}");
  showModalForm("ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู", [
    {
      name: "accent",
      label: "ููุฌุฉ ุงููุทู",
      type: "select",
      options: [
        { value: "en-GB", text: "ุจุฑูุทุงููุฉ" },
        { value: "en-US", text: "ุฃูุฑูููุฉ" },
        { value: "en-IN", text: "ููุฏูุฉ" }
      ],
      value: s.accent || "en-GB"
    },
    {
      name: "rate",
      label: "ุณุฑุนุฉ ุงููุทู",
      type: "select",
      options: [
        { value: "0.75", text: "0.75 ุจุทูุก" },
        { value: "1", text: "1 ุนุงุฏู" },
        { value: "1.25", text: "1.25 ุณุฑูุน" }
      ],
      value: s.rate || "1"
    },
    {
      name: "theme",
      label: "ุงูุซูู (ุงูุฃููุงู)",
      type: "select",
      options: [
        { value: "theme-blue", text: "ุฃุฒุฑู (ุงูุชุฑุงุถู)" },
        { value: "theme-green", text: "ุฃุฎุถุฑ" },
        { value: "theme-purple", text: "ุจููุณุฌู" },
        { value: "theme-grey", text: "ุฑูุงุฏู" }
      ],
      value: localStorage.getItem("theme") || "theme-blue"
    }
  ], vals => {
    // ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุตูุช
    const appSettings = {
      accent: vals.accent,
      rate: vals.rate,
      // ูุง ููุชุจ theme ุฏุงุฎู appSettings ูุถูุงู ูุตู ุงูุงุนุฏุงุฏุงุช
    };
    localStorage.setItem("appSettings", JSON.stringify(appSettings));

    // ุญูุธ ูุชุทุจูู ุงูุซูู ููุฑูุง
    localStorage.setItem("theme", vals.theme);
    document.body.className = ""; // ุฅุฒุงูุฉ ุฃู ูุฆุฉ ุณุงุจูุฉ
    document.body.classList.add(vals.theme);

    showToast("ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช");
  });
};
</script>

</body>
</html>
